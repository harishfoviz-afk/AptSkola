<!DOCTYPE html>
<html lang="en">
<head>
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-LL0LST5PQ5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LL0LST5PQ5');
</script>

<meta name="description" content="Stop guessing about CBSE, ICSE, or IB. Apt Skola uses scientific psychometrics to find the perfect school board match for your child's unique learning style in 5 minutes.">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "name": "Apt Skola",
      "url": "https://www.aptskola.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://www.aptskola.com/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Which school board is best for competitive exams like JEE and NEET?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "CBSE is widely considered the most aligned with Indian competitive exams like JEE and NEET, as the syllabus for these entrance tests is largely based on the NCERT curriculum used by CBSE schools."
          }
        },
        {
          "@type": "Question",
          "name": "Which school board is best for parents with transferable jobs?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "CBSE is the safest option for parents with frequent transfers. It has the highest number of affiliated schools across India and abroad, ensuring seamless curriculum continuity."
          }
        },
        {
          "@type": "Question",
          "name": "Are State Board certificates valid for government jobs?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, State Board certifications are fully valid for all government jobs, competitive exams, and higher education in India, though English proficiency standards may vary."
          }
        }
      ]
    }
  ]
}
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Apt Skola | Find Your Child's Perfect School Board</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            navy: '#0F172A',
                            orange: '#FF6B35',
                            light: '#F8FAFC',
                            gray: '#F1F5F9'
                        }
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.5s ease-out',
                        'slide-in-right': 'slideInRight 0.5s ease-out'
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideInRight: {
                            '0%': { transform: 'translateX(100%)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "EducationalOrganization",
          "@id": "https://www.aptskola.com/#organization",
          "name": "Apt Skola",
          "url": "https://www.aptskola.com",
          "logo": "https://www.aptskola.com/images/logo.png",
          "description": "Scientific school board selection and psychometric testing for students in India."
        }
      ]
    }
    </script>

    <style>
        :root {
            --sunrise-primary: #FF6B35;
            --navy-premium: #0F172A;
            --navy-light: #334155;
            --bg-light: #F8FAFC;
            --border-grey: #E2E8F0;
            --white: #FFFFFF;
            --verified-green: #10B981;
            --star-yellow: #F59E0B;
            --urgent-red: #EF4444;
            --shadow-soft: 0 10px 40px -10px rgba(15, 23, 42, 0.1);
        }
        
        body {
            font-family: 'Inter', system-ui, sans-serif;
            color: var(--navy-light);
            background: #F8FAFC;
            -webkit-font-smoothing: antialiased;
        }
        
        /* FIX: Off-screen render class for PDF generation */
        .off-screen-render {
            position: absolute;
            left: -9999px;
            top: 0;
            width: 800px; /* Fixed width ensures consistent PDF look */
            display: block !important; 
            z-index: -1;
            background: white; /* Ensure transparent backgrounds don't turn black */
        }

        /* Header (Landing Page) */
        header {
            background: var(--navy-premium);
            color: white;
            padding: 40px 20px 80px;
            text-align: center;
            position: relative;
            clip-path: polygon(0 0, 100% 0, 100% 95%, 0 100%);
        }
        
        .brand-logo-container { display: flex; justify-content: center; margin-bottom: 20px; }
        
        header h1 {
            color: var(--white);
            font-size: 2.8rem;
            margin-bottom: 15px;
            font-weight: 800;
            line-height: 1.2;
        }
        
        header .subheadline {
            font-size: 1.2rem;
            margin-bottom: 25px;
            opacity: 0.9;
            font-weight: 400;
            color: #CBD5E1; 
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .urgency-banner {
            display: inline-block;
            background: var(--urgent-red);
            color: white;
            padding: 8px 20px;
            border-radius: 30px;
            margin-bottom: 25px;
            font-weight: 600;
            font-size: 0.9rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Hero Buttons */
        .hero-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .hero-btn-primary {
            background: var(--sunrise-primary);
            color: white;
            padding: 14px 32px;
            border-radius: 50px;
            font-weight: 700;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid var(--sunrise-primary);
        }
        .hero-btn-primary:hover { transform: translateY(-3px); background: #e55b2b; }

        .hero-btn-secondary {
            background: transparent;
            color: white;
            padding: 14px 32px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.2s;
        }
        .hero-btn-secondary:hover { border-color: white; background: rgba(255,255,255,0.1); }
        
        /* Legacy Button Style (retained for form) */
        .custom-cta-button {
            display: block; width: 100%; padding: 16px 20px;
            background: var(--sunrise-primary);
            color: white; text-align: center; text-decoration: none;
            border-radius: 8px; font-weight: 600; font-size: 1.1rem;
            transition: all 0.3s; border: none; cursor: pointer;
        }
        .custom-cta-button:hover { 
            transform: translateY(-2px); 
            background-color: #e55b2b; 
        }
        
        .secondary-cta-button {
            display: block; width: 100%; padding: 16px 20px;
            background: transparent;
            color: var(--navy-premium); text-align: center; text-decoration: none;
            border: 2px solid var(--navy-premium);
            border-radius: 8px; font-weight: 600; font-size: 1.1rem;
            transition: all 0.3s; cursor: pointer;
        }
        .secondary-cta-button:hover {
            background: var(--navy-premium);
            color: white;
        }

        /* Sticky CTA (Mobile) */
        .sticky-cta {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: var(--navy-premium);
            color: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 999;
            display: none; /* Hidden by default, JS toggles it */
            justify-content: space-between;
            align-items: center;
            animation: fadeInUp 0.5s ease-out;
        }
        .sticky-cta button {
            background: var(--sunrise-primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        /* Pain Points & General Section Titles */
        .pain-points-section, .about-section { padding: 80px 20px; background: var(--white); }
        .section-title { text-align: center; font-size: 2.5rem; margin-bottom: 15px; color: var(--navy-premium); font-weight: 800; }
        
        /* About Section New Styles */
        .about-section-content { max-width: 1200px; margin: 0 auto; text-align: center; }
        .about-section-content h2 { font-size: 2.8rem; font-weight: 800; color: var(--navy-premium); margin-bottom: 40px; }
        
        .about-cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 50px; }
        .about-card {
            background: var(--bg-light); 
            border-radius: 16px;
            padding: 30px; 
            text-align: left;
            border-left: 5px solid var(--sunrise-primary);
            box-shadow: 0 4px 20px rgba(15, 23, 42, 0.05);
        }
        .about-card h3 { 
            font-size: 1.5rem; 
            font-weight: 700; 
            color: var(--navy-premium); 
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-grey);
        }
        .about-card p { font-size: 1rem; line-height: 1.6; color: var(--navy-light); }
        
        /* DNA Points */
        .dna-points { display: flex; flex-direction: column; gap: 15px; }
        .dna-point { 
            font-weight: 600; 
            color: var(--navy-premium); 
            border-left: 3px solid var(--sunrise-primary); 
            padding-left: 15px;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        /* Pain Points */
        .pain-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; max-width: 1200px; margin: 0 auto; }
        .pain-card {
            background: var(--white); 
            border: 1px solid var(--border-grey);
            border-radius: 16px;
            padding: 35px; text-align: center; transition: all 0.3s;
            box-shadow: var(--shadow-soft);
        }
        .pain-card:hover { transform: translateY(-5px); border-color: var(--sunrise-primary); }
        .pain-icon { font-size: 3.5rem; margin-bottom: 20px; }
        .pain-card h3 { color: var(--navy-premium); font-size: 1.5rem; margin-bottom: 15px; font-weight: 700; }
        
        /* Social Proof */
        .social-proof { padding: 80px 20px; background: var(--bg-light); }
        .testimonial-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1200px; margin: 40px auto 0; }
        .testimonial { background: var(--white); padding: 35px; border-radius: 16px; box-shadow: var(--shadow-soft); position: relative; border: 1px solid var(--border-grey); }
        .testimonial::before { content: '"'; position: absolute; top: -10px; left: 20px; font-size: 5rem; color: var(--sunrise-primary); opacity: 0.2; font-family: Georgia, serif; }
        .testimonial-text { font-style: italic; margin-bottom: 20px; color: var(--navy-light); line-height: 1.8; position: relative; z-index: 1; }
        .testimonial-author { font-weight: 700; color: var(--navy-premium); font-size: 1.1rem; }
        .stars { color: var(--star-yellow); font-size: 1.2rem; margin-bottom: 10px; }

        /* --- INTERMEDIATE PAGE HEADER/FOOTER STYLES --- */
        .intermediate-header {
            background: var(--navy-premium);
            color: white;
            padding: 1rem 2rem;
            width: 100%;
            position: sticky;
            top: 0;
            z-index: 50;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .intermediate-footer {
            background: var(--navy-premium);
            color: white;
            padding: 1.5rem 2rem;
            width: 100%;
            margin-top: auto; 
        }
        .intermediate-footer p { font-size: 0.85rem; text-align: center; color: #CBD5E1; margin-top: 5px; }

        /* --- UI FOR QUESTION PAGE --- */
        #questionPageApp { display: none; min-height: 100vh; background: #fff; padding: 0; flex-direction: column; }
        .question-page { display: none; min-height: 100vh; background: #fff; padding: 0; flex-direction: column; }
        .active { display: flex !important; }
        
        .question-content-wrapper { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; width: 100%; }

        .question-container { width: 100%; max-width: 750px; background: #fff; padding: 0 20px; }
        .progress-container { width: 100%; margin-bottom: 20px; text-align: center; }
        .progress-track { width: 100%; height: 6px; background: #E2E8F0; border-radius: 10px; overflow: hidden; margin-bottom: 15px; }
        .progress-fill { height: 100%; background: #FF6B35; border-radius: 10px; transition: width 0.4s ease; }
        .progress-label { font-size: 0.9rem; color: #64748B; font-weight: 500; }
        .question-text { font-size: 2rem; font-weight: 800; color: var(--navy-premium); margin-bottom: 30px; line-height: 1.3; text-align: left; }
        .options-grid { display: flex; flex-direction: column; gap: 15px; width: 100%; }
        .option-card { padding: 20px 25px; background: #F8FAFC; border-radius: 12px; cursor: pointer; transition: all 0.2s ease; font-size: 1.1rem; font-weight: 500; color: var(--navy-premium); border: 2px solid transparent; text-align: left; }
        .option-card:hover { background: #F1F5F9; }
        .option-card.selected { border-color: var(--navy-premium); background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .nav-actions { display: flex; align-items: center; justify-content: flex-start; margin-top: 40px; gap: 20px; }
        .btn-prev { background: #E2E8F0; color: #64748B; font-weight: 600; padding: 14px 28px; border-radius: 8px; border: none; cursor: pointer; transition: background 0.2s; }
        .btn-prev:hover { background: #CBD5E1; }

        /* Other Pages */
        .details-page, .success-page, #paymentPageContainer { display: none; min-height: 100vh; background: var(--bg-light); padding: 0; flex-direction: column; }
        /* Adjusted .success-content-wrapper to center the container */
        .details-content-wrapper, .success-content-wrapper { 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; /* Center vertically */
            padding: 40px 20px; 
            width: 100%; 
        }

        .details-form, .success-container { background: var(--white); border-radius: 16px; padding: 50px; max-width: 800px; width: 100%; box-shadow: var(--shadow-soft); border: 1px solid var(--border-grey); margin-bottom: 30px; }
        .form-group { margin-bottom: 25px; width: 100%; }
        .form-group label { display: block; color: var(--navy-premium); font-weight: 600; margin-bottom: 8px; }
        .form-group input, .form-group select { width: 100%; padding: 15px; border: 1px solid var(--border-grey); border-radius: 8px; font-size: 1rem; background: var(--bg-light); }
        
        /* REPORT PREVIEW STYLES */
        #reportPreview { width: 100%; text-align: left; margin-top: 20px; padding: 20px; }
        .report-card { background: #fff; border: 1px solid var(--border-grey); border-radius: 12px; padding: 30px; margin-bottom: 30px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); page-break-inside: avoid; }
        .report-header-bg { background: var(--navy-premium); color: white; padding: 10px 15px; font-weight: 700; font-size: 1.2rem; margin: -30px -30px 20px -30px; border-radius: 12px 12px 0 0; display: flex; align-items: center; gap: 10px; }
        .data-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .data-table th, .data-table td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        .data-table th { background: #f8fafc; font-weight: 700; color: var(--navy-premium); }
        .narrative-item { background: white; padding: 20px; border-radius: 8px; border-left: 4px solid var(--sunrise-primary); box-shadow: 0 2px 4px rgba(0,0,0,0.03); margin-bottom: 15px; }
        .narrative-theme { color: var(--navy-premium); margin: 0 0 10px 0; font-size: 1.1rem; font-weight: 700; }
        .script-box { background: #f1f5f9; padding: 15px; border-radius: 8px; border-left: 4px solid var(--navy-premium); margin-bottom: 15px; font-family: monospace; font-size: 0.95rem; color: var(--navy-premium); }
        .premium-badge, .platinum-badge { display: inline-block; font-size: 0.75rem; font-weight: 700; padding: 2px 8px; border-radius: 10px; margin-left: auto; }
        .premium-badge { background: #7c3aed; color: white; }
        .platinum-badge { background: var(--star-yellow); color: var(--navy-premium); }

        /* FAQ Styling */
        .faq-item { margin-bottom: 15px; border-bottom: 1px solid #E2E8F0; padding-bottom: 15px; }
        .faq-q { color: var(--navy-premium); font-weight: 700; margin-bottom: 5px; font-size: 1rem; }
        .faq-a { color: var(--navy-light); font-size: 0.95rem; line-height: 1.6; }
        /* INSIGHT BLOCK */
        .insight-block {
            background: #f8fafc;
            border-left: 4px solid var(--navy-premium);
            padding: 15px 20px;
            margin-bottom: 25px;
            border-radius: 0 8px 8px 0;
        }
        .insight-title {
            color: var(--navy-premium);
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .insight-body { color: #475569; font-size: 0.95rem; line-height: 1.5; }
        .legal-disclaimer { font-size: 0.75rem; color: #94a3b8; text-align: center; padding: 20px 0; margin-top: 20px; border-top: 1px solid #eee; }

        /* Footer */
        footer { background: var(--navy-premium); color: white; padding: 50px 20px; text-align: center; margin-top: auto; }
        footer .policy-links a { margin: 0 8px; color: #CBD5E1; text-decoration: none; font-size: 0.85rem; transition: color 0.2s; }
        footer .policy-links a:hover { color: var(--sunrise-primary); }

        .hidden { display: none !important; }
        
        /* Modal & Spinner */
        .payment-modal, .sample-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.8); justify-content: center; align-items: center; z-index: 1000; }
        .payment-modal.active, .sample-modal.active { display: flex; }
        .payment-modal-content { background: white; padding: 40px; border-radius: 16px; text-align: center; width: 90%; max-width: 400px; }
        
        /* Sample Modal Content */
        .sample-modal-content { background: #F1F5F9; padding: 0; border-radius: 16px; width: 95%; max-width: 800px; height: 90vh; overflow-y: auto; position: relative; }
        .close-sample { position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.5); color: white; width: 35px; height: 35px; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 10; font-weight: bold; }
        .close-sample:hover { background: black; }

        .spinner { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid var(--sunrise-primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Feedback Styles (NPS/Stars) */
        .question-label { color: #1E293B; font-weight: 600; font-size: 1rem; line-height: 1.4; margin-bottom: 0.75rem; display: block; }
        .star-svg { width: 100%; height: 100%; display: block; cursor: pointer; transition: transform 0.2s; }
        .star-path { fill: #F1F5F9; stroke: #CBD5E1; stroke-width: 1.5; transition: all 0.2s ease; }
        .star-active .star-path { fill: url(#modernGradient); stroke: none; }
        .nps-container { display: flex; justify-content: center; flex-wrap: wrap; gap: 0.5rem; }
        .nps-btn { width: 2.5rem; height: 3rem; display: flex; align-items: center; justify-content: center; border-radius: 0.5rem; font-weight: 500; color: #64748B; background: #F8FAFC; border: 1px solid #E2E8F0; cursor: pointer; transition: all 0.2s; }
        .nps-btn.selected { background: linear-gradient(135deg, #FFD25E 0%, #FF9546 100%); color: white; border-color: transparent; }
        .nps-btn:hover { background: #F1F5F9; color: #1E293B; border-color: #CBD5E1; transform: translateY(-2px); }
        .choice-btn { transition: all 0.2s ease; border: 1px solid #E2E8F0; background-color: #FFFFFF; color: #475569; font-size: 0.875rem; width: 100%; }
        .choice-btn:hover { border-color: #CBD5E1; background-color: #F8FAFC; }
        .choice-btn.selected { background: linear-gradient(135deg, #FFD25E 0%, #FF9546 100%); border-color: transparent; color: white; font-weight: 600; box-shadow: 0 4px 12px rgba(255, 149, 70, 0.3); transform: translateY(-1px); }
        .custom-input:focus { outline: none; border-color: #FF9546; ring: 2px solid rgba(255, 149, 70, 0.2); box-shadow: 0 0 0 3px rgba(255, 149, 70, 0.1); }

        /* --- MOBILE RESPONSIVENESS FIXES --- */
        @media (max-width: 768px) {
            header {
                padding: 30px 15px 50px;
                clip-path: polygon(0 0, 100% 0, 100% 97%, 0 100%);
            }
            header h1 { font-size: 2rem; line-height: 1.2; }
            header .subheadline { font-size: 1rem; }

            .sticky-cta { display: flex; } 
            .hero-actions { flex-direction: column; width: 100%; gap: 10px; }
            .hero-btn-primary, .hero-btn-secondary { width: 100%; text-align: center; }
            
            .section-title { font-size: 2rem; }
            .about-section-content h2 { font-size: 2rem; }
            
            /* Reduce padding on forms for mobile */
            .details-form, .success-container { padding: 25px 20px; }
            
            /* Report Cards: Ensure tables scroll instead of breaking */
            .report-card { padding: 20px; overflow-x: auto; }
            .report-header-bg { margin: -20px -20px 20px -20px; border-radius: 12px 12px 0 0; font-size: 1rem; }
            
            .data-table { min-width: 300px; font-size: 0.9rem; }
            .data-table th, .data-table td { padding: 8px; }
            
            .pain-cards, .testimonial-grid { grid-template-columns: 1fr; }
            
            /* Feedback Section Mobile Adjustments */
            .browser-only .grid { grid-template-columns: 1fr !important; gap: 30px !important; }
            .star-wrapper { width: 35px; height: 35px; } /* Larger touch target */
            .choice-btn { padding: 12px; }
            
            /* Font size adjustment for inputs to prevent zoom on iOS */
            input, select, textarea { font-size: 16px !important; }
        }
        
        /* Trust Badges */
        .trust-badge-row { display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 20px; opacity: 0.7; }
        .trust-badge-item { display: flex; flex-direction: column; align-items: center; font-size: 0.7rem; color: #64748B; }
        .trust-icon { width: 32px; height: 32px; margin-bottom: 4px; fill: #64748B; }
    </style>
</head>
<body>
    <svg width="0" height="0" class="absolute">
        <defs>
            <linearGradient id="modernGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#FFD25E;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#FF9546;stop-opacity:1" />
            </linearGradient>
        </defs>
    </svg>

    <form name="feedback_form" netlify netlify-honeypot="bot-field" hidden>
        <input type="text" name="parent_name" />
        <input type="email" name="parent_email" />
        <input type="text" name="rating_stars" />
        <input type="text" name="time_saved" />
        <input type="text" name="unanswered_question" />
        <input type="text" name="nps_score" />
    </form>

    <div id="stickyCTA" class="sticky-cta md:hidden">
        <div class="flex flex-col">
            <span class="font-bold text-sm">Confused about boards?</span>
            <span class="text-xs text-slate-300">Get clarity in 5 mins</span>
        </div>
        <button onclick="scrollToPricing()">Find My School</button>
    </div>

    <div id="landingPage">
        <header>
            <div class="container mx-auto px-4">
                <div class="brand-logo-container" id="landingHeaderLogo"></div>
                
                <div class="urgency-banner">‚ö° Limited Time: 40% OFF - Offer ends soon</div>
                
                <h1 class="animate-fade-in-up">Stop Guessing. Start Knowing.<br>Find Your Child's Perfect School Board</h1>
                <p class="subheadline animate-fade-in-up" style="animation-delay: 0.2s">CBSE? ICSE? IB? Get a scientific, personalized recommendation based on your child's unique psychology in 5 minutes.</p>
                
                <div class="hero-actions animate-fade-in-up" style="animation-delay: 0.4s">
                    <button onclick="scrollToPricing()" class="hero-btn-primary">Start Assessment</button>
                    <button onclick="openSampleReport()" class="hero-btn-secondary">View Sample Report</button>
                </div>
            </div>
        </header>

        <section id="aboutAptSkola" class="about-section">
            <div class="container">
                <div class="about-section-content">
                    <h2 class="text-3xl md:text-4xl">We Don't Just Find Schools. We Match Minds to Boards.</h2>
                    
                    <div class="about-cards-grid">
                        
                        <div class="about-card" style="border-left-color: var(--urgent-red);">
                            <h3>The Alphabet Soup of Anxiety</h3>
                            <p>Every Indian parent faces the same dilemma: CBSE, ICSE, IB, IGCSE, or State Board? For years, this decision has been based on hearsay, neighbor‚Äôs advice, or proximity to home.</p>
                            <p class="mt-4 font-semibold text-sm" style="color: var(--urgent-red);">Forcing a creative learner into a rigid, rote-learning system doesn't just lower grades‚Äîit kills confidence.</p>
                        </div>
                        
                        <div class="about-card" style="border-left-color: var(--verified-green);">
                            <h3>The Solution: Science, Not Guesswork.</h3>
                            <p>At Apt Skola, we believe that a child‚Äôs education shouldn't be a gamble. We are India‚Äôs first <b>Scientific School Board Selection Service</b>.</p>
                            <p class="mt-4">We moved the conversation from "Which school is famous?" to <b>"Which environment fits my child's brain?"</b></p>
                        </div>
                        
                        <div class="about-card">
                            <h3>How We Work</h3>
                            <p>We use advanced Psychometric Assessments to decode your child‚Äôs unique learning DNA:</p>
                            <div class="dna-points mt-4">
                                <div class="dna-point">Visual vs. Auditory Learners: Does your child learn by seeing charts or listening to lectures?</div>
                                <div class="dna-point">Rote vs. Conceptual Thinkers: Does your child thrive on structure (CBSE) or inquiry (IB)?</div>
                                <div class="dna-point">Competitive vs. Creative: Are they future engineers (JEE focus) or future innovators (Liberal Arts focus)?</div>
                            </div>
                        </div>
                        
                    </div>

                    <h3><b><big style="color: orange;">Our Mission</big></b></h3>
                    <p>To ensure that no child in India hates school simply because they are in the wrong ecosystem. By aligning the Board to the Brain, we future-proof your child's career before the first school bell even rings.</p>
                    
                    <p class="mt-8 text-xl font-bold text-brand-navy">Apt Skola: Because your child is unique. Their school board should be too.</p>
                </div>
            </div>
        </section>

        <section class="pain-points-section">
            <div class="container">
                <h2 class="section-title">Why Choosing a Board is Hard</h2>
                <div class="pain-cards">
                    <div class="pain-card"><div class="pain-icon">üò∞</div><h3>The Confusion</h3><p>Friends say one thing, relatives say another. Who is right for YOUR child?</p></div>
                    <div class="pain-card"><div class="pain-icon">üîÆ</div><h3>Future Fit</h3><p>Will your choice limit their college options? Make sure their foundation matches their ambition.</p></div>
                    <div class="pain-card"><div class="pain-icon">üí∏</div><h3>Financial Clarity</h3><p>Hidden costs can double your budget. Get the real 15-year forecast.</p></div>
                </div>
            </div>
        </section>

        <section class="bg-slate-50 py-12 px-4 sm:px-6 lg:px-8" id="pricing">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-brand-orange font-bold tracking-wide uppercase text-sm mb-2">Invest in Clarity</h2>
                    <h1 class="text-3xl md:text-4xl font-extrabold text-brand-navy mb-4">Choose the Right Roadmap</h1>
                    <p class="text-lg text-slate-600 max-w-2xl mx-auto">Stop guessing. Get scientific recommendations and admission tools in minutes.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-start">
                    <div class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden transform transition duration-300 hover:-translate-y-2 hover:shadow-xl flex flex-col h-full">
                        <div class="p-8 flex-grow">
                            <h3 class="text-xl font-bold text-brand-navy mb-2">The Decision Decoder</h3>
                            <p class="text-sm text-slate-500 mb-6">Scientific Board Match & Foundational Roadmap.</p>
                            <div class="flex items-baseline mb-6">
                                <span class="text-4xl font-extrabold text-brand-navy">‚Çπ599</span>
                                <span class="text-lg text-slate-400 line-through ml-2">‚Çπ999</span>
                            </div>
                            <ul class="space-y-4 mb-8">
                                <li class="flex items-start"><svg class="h-5 w-5 text-green-500 shrink-0 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg><span class="text-slate-600 text-sm">Psychometric Assessment</span></li>
                                <li class="flex items-start"><svg class="h-5 w-5 text-green-500 shrink-0 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg><span class="text-slate-600 text-sm">Future-Proofing</span></li>
                            </ul>
                        </div>
                        <div class="p-8 pt-0 mt-auto">
                            <button onclick="selectPackage('Essential', 599)" class="w-full block bg-slate-100 hover:bg-slate-200 text-brand-navy font-bold py-3 px-4 rounded-xl transition duration-200 text-center">Get Clarity Now</button>
                        </div>
                    </div>

                    <div class="relative bg-white rounded-2xl shadow-xl border-2 border-brand-navy overflow-hidden transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl flex flex-col h-full z-10 scale-105 md:scale-105 my-4 md:my-0">
                        <div class="absolute top-0 right-0 left-0 bg-brand-navy text-white text-center text-xs font-bold uppercase tracking-wider py-1.5">Most Popular</div>
                        <div class="p-8 pt-10 flex-grow">
                            <h3 class="text-xl font-bold text-brand-navy mb-2">The Smart Parent Toolkit</h3>
                            <p class="text-sm text-slate-500 mb-6">Financial Safety & Risk-Free Evaluation</p>
                            <div class="flex items-baseline mb-6">
                                <span class="text-4xl font-extrabold text-brand-navy">‚Çπ1,499</span>
                                <span class="text-lg text-slate-400 line-through ml-2">‚Çπ2,499</span>
                            </div>
                            <div class="text-xs font-semibold text-brand-orange uppercase tracking-wide mb-3">Everything in Essential, plus:</div>
                            <ul class="space-y-4 mb-8">
                                <li class="flex items-start"><svg class="h-5 w-5 text-brand-navy shrink-0 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg><span class="text-brand-navy font-medium text-sm">Financial Clarity</span></li>
                                <li class="flex items-start"><svg class="h-5 w-5 text-brand-navy shrink-0 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg><span class="text-brand-navy font-medium text-sm">Risk Mitigation</span></li>
                            </ul>
                        </div>
                        <div class="p-8 pt-0 mt-auto">
                            <button onclick="selectPackage('Premium', 1499)" class="w-full block bg-brand-navy hover:bg-slate-800 text-white font-bold py-4 px-4 rounded-xl transition duration-200 text-center shadow-lg">Get the Toolkit</button>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg border border-brand-orange/30 ring-1 ring-brand-orange/20 overflow-hidden transform transition duration-300 hover:-translate-y-2 hover:shadow-xl flex flex-col h-full">
                        <div class="p-8 flex-grow">
                            <h3 class="text-xl font-bold text-brand-navy mb-2">The Executive Advantage</h3>
                            <p class="text-sm text-slate-500 mb-6">Done-For-You: Admission Success & Negotiation</p>
                            <div class="flex items-baseline mb-6">
                                <span class="text-4xl font-extrabold text-brand-navy">‚Çπ2,999</span>
                                <span class="text-lg text-slate-400 line-through ml-2">‚Çπ4,999</span>
                            </div>
                            <div class="text-xs font-semibold text-brand-orange uppercase tracking-wide mb-3">Everything in Essential, plus:</div>
                            <ul class="space-y-4 mb-8">
                                <li class="flex items-start"><svg class="h-5 w-5 text-brand-orange shrink-0 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg><span class="text-slate-700 text-sm">Proven Savings</span></li>
                                <li class="flex items-start"><svg class="h-5 w-5 text-brand-orange shrink-0 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg><span class="text-slate-700 text-sm">Complete Execution</span></li>
                            </ul>
                        </div>
                        <div class="p-8 pt-0 mt-auto">
                            <button onclick="selectPackage('Platinum', 2999)" class="w-full block bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition duration-200 text-center shadow-md">Find My School</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-12 px-4 sm:px-6 lg:px-8 bg-slate-50" id="testimonials">
            <div class="max-w-7xl mx-auto">
                <h2 class="text-3xl font-extrabold text-brand-navy text-center mb-10">Real Parent Stories</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-slate-200">
                        <div class="text-yellow-400 text-xl mb-3">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <h3 class="text-lg font-bold text-brand-navy mb-2">"Saved ‚Çπ25,000 on Admission"</h3>
                        <p class="text-slate-600 text-sm mb-4">"I used the 'Sibling Pipeline' negotiation script. They waived 50% of the Admission Fee. That‚Äôs a ‚Çπ25k saving for a ‚Çπ2.5k investment."</p>
                        <div class="flex items-center justify-between mt-auto">
                            <p class="text-xs font-bold text-brand-navy">- Arjun K., Bangalore</p>
                            <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-semibold">Verified Parent</span>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-slate-200">
                        <div class="text-yellow-400 text-xl mb-3">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <h3 class="text-lg font-bold text-brand-navy mb-2">"3 Weeks of Research in 10 Mins"</h3>
                        <p class="text-slate-600 text-sm mb-4">"I had 15 tabs open and was totally confused. This report gave me the answer in 10 minutes. The 'Fee Forecaster' was a reality check."</p>
                        <div class="flex items-center justify-between mt-auto">
                            <p class="text-xs font-bold text-brand-navy">- Priya S., Mumbai</p>
                            <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-semibold">Verified Parent</span>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-slate-200">
                        <div class="text-yellow-400 text-xl mb-3">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <h3 class="text-lg font-bold text-brand-navy mb-2">"The "Library Prop""</h3>
                        <p class="text-slate-600 text-sm mb-4">"We loved the campus tour, but then I used the 'Library Test' from the toolkit. I looked closely and realized the books were covered in dust and mostly encyclopedias nobody reads. It was a prop, not a library. We chose a school that actually cares about reading."</p>
                        <div class="flex items-center justify-between mt-auto">
                            <p class="text-xs font-bold text-brand-navy">- Vikram & Neha, Hyd</p>
                            <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-semibold">Verified Parent</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact-and-policies" class="py-12 px-4 sm:px-6 lg:px-8 bg-white border-t border-slate-200">
            <div class="max-w-7xl mx-auto">
                <h2 class="text-2xl font-bold text-brand-navy mb-8 text-center">Contact & Policies</h2>
                
                <div id="contact" class="mb-10 p-6 bg-brand-light rounded-xl border border-slate-200 text-center">
                    <h3 class="text-xl font-bold text-brand-navy mb-4">Contact Apt Skola</h3>
                    <p class="text-slate-600">For urgent inquiries regarding our reports or services:</p>
                    <p class="mt-3 font-semibold text-brand-navy">Email: connect@aptskola.com</p>
                    <p class="text-sm text-slate-500 mt-1 flex items-center justify-center gap-2">
                        <a href="https://wa.me/918808814040" target="_blank" 
                           class="font-semibold text-green-600 hover:text-green-700 transition-colors flex items-center gap-2">
                            
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="text-green-500">
                                <path d="M12.001 2c-5.522 0-10 4.478-10 10s4.478 10 10 10c1.468 0 2.864-.326 4.127-.923l2.801.956-1.026-2.616c.866-1.306 1.348-2.83 1.348-4.417 0-5.522-4.478-10-10-10zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8c0 1.587-.516 3.064-1.428 4.316l-.089-.062-.515-.311-1.077-.665c-.092-.054-.207-.066-.307-.035l-1.025.337c-1.571-.971-3.692-3.092-4.663-4.663l.337-1.025c.03-.1-.005-.215-.059-.307l-.665-1.077-.311-.515-.062-.089c-1.252-.912-2.79-1.411-4.373-1.411zm.001-14c4.01 0 7.273 3.263 7.273 7.273s-3.263 7.273-7.273 7.273-7.273-3.263-7.273-7.273 3.263-7.273 7.273-7.273zm-1.04 11.272l1.642 1.636c.21.209.551.209.76 0l2.333-2.333c.18-.18.23-.443.125-.675l-.946-2.296c-.104-.252-.375-.38-.637-.302l-1.879.544c-.262.078-.512-.007-.69-.187l-1.636-1.642c-.179-.179-.429-.264-.691-.186l-1.879.543c-.262.079-.533-.049-.637-.302l-.946-2.295c-.105-.232-.055-.495.124-.675l2.333-2.333c-.209.209-.209.55 0 .76l1.636 1.642z"/>
                            </svg>
                            
                            WhatsApp: +91 88088 14040
                        </a>
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left">
                    <div id="privacy">
                        <h4 class="text-lg font-bold text-brand-navy mb-2 border-b-2 border-brand-orange pb-1">Privacy Policy</h4>
                        <p class="text-sm text-slate-600">Apt Skola collects user data (name, email, phone) solely for providing personalized career guidance services and communication related to the reports. We do not share, sell, or rent your personal information to third parties. All data is secured using industry-standard protocols.</p>
                    </div>
                    
                    <div id="terms">
                        <h4 class="text-lg font-bold text-brand-navy mb-2 border-b-2 border-brand-orange pb-1">Terms of Service</h4>
                        <p class="text-sm text-slate-600">By using AptSkola.com and accessing our reports, you agree to our terms. This guidance is algorithmic and advisory only; ultimate decisions regarding school enrollment remain the sole responsibility of the parent. Service usage is strictly for personal, non-commercial use.</p>
                    </div>
                    
                    <div id="refund">
                        <h4 class="text-lg font-bold text-brand-navy mb-2 border-b-2 border-brand-orange pb-1">Refund & Cancellation Policy</h4>
                        <p class="text-sm text-slate-600">Full refund is available if the report has not yet been generated. Once the final report has been viewed or downloaded, services are considered rendered and no refund will be issued.</p>
                    </div>
                </div>
            </div>
        </section>

        <footer>
            <div class="container">
                <div class="policy-links mb-4">
                    <a href="#contact">Contact Us</a> | <a href="#Refund & Cancellation Policy">Refund & Cancellation Policy</a> | <a href="#privacy">Privacy</a> | <a href="#terms">Terms</a>
                </div>
                <p style="font-size: 1.3rem; margin-bottom: 15px; font-weight:800;">Apt <span style="color: var(--sunrise-primary);">Skola</span></p>
                <p>&copy; 2025 Apt Skola. All Rights Reserved.</p>
            </div>
        </footer>
    </div>

    <div id="questionPages"></div>

    <div id="detailsPage" class="details-page hidden">
        <div id="detailsHeader"></div>
        <div class="details-content-wrapper">
            <div class="details-form">
                <h2>Almost There! üéâ</h2>
                <p>Enter your details to generate your report</p>
                
                <form id="customerForm" name="lead-capture" method="POST" data-netlify="true">
                    <input type="hidden" name="form-name" value="lead-capture" />
                    <div class="form-group"><label>Parent's Full Name *</label><input type="text" id="parentName" name="parentName" required></div>
                    <div class="form-group"><label>Child's Name *</label><input type="text" id="childName" name="childName" required></div>
                    <div class="form-group"><label>Child's Age *</label><select id="childAge" name="childAge" required><option value="5">5 years</option><option value="6">6 years</option></select></div>
                    <div class="form-group"><label>Email Address *</label><input type="email" id="email" name="email" required></div>
                    <div class="form-group"><label>Mobile Number *</label><input type="tel" id="phone" name="phone" required></div>
                    <button type="submit" id="submitBtn" class="custom-cta-button">Proceed to Payment ‚Üí</button>
                    <p id="loadingMsg" style="text-align:center; display:none; color: var(--sunrise-primary); margin-top: 10px;">Processing...</p>
                </form>
            </div>
        </div>
        <div id="detailsFooter"></div>
    </div>

    <div id="paymentPageContainer" class="details-page hidden"> 
        <div id="paymentHeader"></div>
        <div class="details-content-wrapper">
            <div class="details-form">
                <h2 style="color: var(--sunrise-primary); margin-bottom: 30px;">Secure Payment</h2>
                
                <div class="order-summary" style="background:var(--brand-gray); padding: 25px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 class="text-xl font-bold text-brand-navy mb-4">Order Summary</h3>
                    <div class="order-item flex justify-between mb-2 text-brand-navy"><span>Package:</span><span id="summaryPackage" class="font-medium"></span></div>
                    <div class="order-item flex justify-between mb-2 text-brand-navy"><span>Price:</span><span id="summaryPrice" class="font-medium"></span></div>
                    <div class="order-total flex justify-between text-xl font-extrabold text-brand-orange pt-4 mt-4 border-t border-slate-300"><span>Total Payable:</span><span id="summaryTotal"></span></div>
                </div>

                <p class="text-center mb-6 text-slate-600">Your customized report is ready to be generated. Click below to pay securely.</p>
                <button class="custom-cta-button" onclick="redirectToRazorpay()" style="width: 100%;" id="payButton">Pay via UPI / Card / Netbanking ‚Üí</button>
                <p id="paymentProcessing" style="text-align:center; display:none; color: var(--sunrise-primary); margin-top: 10px;">Processing payment...</p>

                <div class="trust-badge-row">
                    <div class="trust-badge-item">
                        <svg class="trust-icon" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/></svg>
                        <span>SSL Secure</span>
                    </div>
                    <div class="trust-badge-item">
                        <svg class="trust-icon" viewBox="0 0 24 24"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                        <span>UPI/Cards</span>
                    </div>
                    <div class="trust-badge-item">
                        <svg class="trust-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                        <span>Verified</span>
                    </div>
                </div>
            </div>
        </div>
        <div id="paymentFooter"></div>
    </div>

    <div id="sampleReportModal" class="sample-modal">
        <div class="sample-modal-content" onclick="event.stopPropagation()">
            <div class="close-sample" onclick="closeSampleReport()">√ó</div>
            <div id="sampleReportContent" style="padding: 40px; text-align: left;">
                </div>
        </div>
    </div>

    <div id="paymentModal" class="payment-modal" onclick="closeModal()">
        <div class="payment-modal-content" onclick="event.stopPropagation()">
            <div class="spinner"></div>
            <h3>Processing...</h3>
            <p id="paymentStatusText">Awaiting payment confirmation...</p>
        </div>
    </div>

    <div id="successPage" class="success-page hidden">
        <div id="successHeader"></div> 
        <div class="success-content-wrapper">
            <div class="success-container" style="text-align: center;"> <div style="font-size: 3rem; margin-bottom: 10px;">‚úÖ</div>
                <h2 style="color: var(--verified-green); margin-bottom: 15px;">Success! We have emailed a copy to you for safe keeping.</h2>
                <p style='color: var(--sunrise-primary); font-size: 0.9em; margin-top: -10px; font-weight: bold;'>Your 3 weeks of research is now a 10-minute read.</p>
                <p style="color: var(--navy-light); margin-bottom: 20px;">Welcome back, <strong id="successParentName">Parent</strong>! Here is your full report.</p>
                <button class="custom-cta-button" style="width: 100%; padding: 18px 40px; font-size: 1.2rem; margin-bottom: 30px;" onclick="downloadShareReport()" id="downloadShareBtn">Download / Share Report üì≤</button>
                
                <div class="report-card mt-8" style="text-align:center; border-color: var(--sunrise-primary); background: #fff7ed;">
                    <h3 style="color:var(--navy-premium); font-weight:800; margin-bottom:15px; font-size:1.5rem;">Help Other Parents Find Clarity</h3>
                    <p style="margin-bottom:20px; color:var(--navy-light);">If Apt Skola helped you, spread the word!</p>
                    <div style="display:flex; justify-content:center; gap:15px; flex-wrap:wrap;">
                        <button onclick="shareToWhatsApp()" style="background:#25D366; color:white; border:none; padding:12px 24px; border-radius:50px; font-weight:bold; display:flex; align-items:center; gap:8px; cursor:pointer; transition:transform 0.2s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.894-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.463 1.065 2.876 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
                            WhatsApp
                        </button>
                        <button onclick="shareToFacebook()" style="background:#1877F2; color:white; border:none; padding:12px 24px; border-radius:50px; font-weight:bold; display:flex; align-items:center; gap:8px; cursor:pointer; transition:transform 0.2s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.588-1.333h2.412v-3h-3c-3.121 0-4 1.299-4 3.237v1.763z"/></svg>
                            Facebook
                        </button>
                        <button onclick="shareToTwitter()" style="background:#1DA1F2; color:white; border:none; padding:12px 24px; border-radius:50px; font-weight:bold; display:flex; align-items:center; gap:8px; cursor:pointer; transition:transform 0.2s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg>
                            Twitter
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div id="successFooter"></div>
    </div>

    <div id="reportPreview" class="off-screen-render"></div>

    <script>
        // --- CONFIG ---
        // IMPORTANT: Replace this with your actual Razorpay Key ID
        const RAZORPAY_KEY_ID = "rzp_live_RpteyQJeRciEvX"; 
        
        // Prices in PAISE (1 Rupee = 100 Paise)
        const PACKAGE_PRICES = { 'Essential': 100, 'Premium': 100, 'Platinum': 100 };
        
        const starPath = "M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.53.044.75.72.35 1.054l-4.186 3.492a.563.563 0 00-.182.559l1.267 5.405c.126.54-.45.96-.906.658l-4.752-3.134a.563.563 0 00-.608 0l-4.752 3.134c-.456.302-1.032-.118-.906-.658l1.267-5.405a.563.563 0 00-.182-.559l-4.186-3.492c-.4-.334-.179-1.01.35-1.054l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z";

        let currentQuestion = 0;
        let selectedPackage = '';
        let selectedPrice = 0;
        let answers = {};
        let customerData = {}; 

        // New Feedback Data Object
        let feedbackData = {
            stars: 0,
            timeSaved: "",
            nps: 0
        };

        // --- CORE UI ACTIONS ---
        function scrollToPricing() {
            const pricing = document.getElementById('pricing');
            if (pricing) {
                pricing.scrollIntoView({ behavior: 'smooth' });
            } else {
                console.warn("Pricing section not found.");
            }
        }
        
        // 1. Sticky CTA Logic
        window.addEventListener('scroll', () => {
            const stickyBtn = document.getElementById('stickyCTA');
            const landingPage = document.getElementById('landingPage');
            if (window.scrollY > 300 && !landingPage.classList.contains('hidden')) {
                stickyBtn.style.display = 'flex';
            } else {
                stickyBtn.style.display = 'none';
            }
        });


        // --- SAMPLE REPORT LOGIC ---
        function openSampleReport() {
            const modal = document.getElementById('sampleReportModal');
            const content = document.getElementById('sampleReportContent');
            
            content.innerHTML = `
                <div style="text-align:center; margin-bottom:30px;">
                    <h2 class="text-2xl font-bold text-brand-navy">Sample Report: The Decision Decoder</h2>
                    <p class="text-sm text-slate-500">This is what you get after the assessment.</p>
                </div>
                <div class="report-card" style="background:#0F172A; color:white;">
                    <div style="font-size:2rem; font-weight:800;">The Standardized Strategist</div>
                    <div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:8px; margin-top:10px;">
                        Recommended: <span style="color:#FF6B35; font-weight:bold;">CBSE</span>
                    </div>
                </div>
                <div class="report-card" style="opacity: 0.6; filter: blur(1px); position: relative; overflow: hidden;">
                    <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; z-index: 10; background: rgba(255,255,255,0.4);">
                        <button onclick="closeSampleReport(); scrollToPricing()" class="hero-btn-primary" style="box-shadow: 0 10px 20px rgba(0,0,0,0.2);">Unlock Full Report</button>
                    </div>
                    <div class="report-header-bg">CHILD'S PROFILE SUMMARY</div>
                    <table class="data-table">
                        <tr><td><strong>Learning Style</strong></td><td>Visual Learner</td></tr>
                        <tr><td><strong>Core Interest</strong></td><td>Science & Logic</td></tr>
                    </table>
                    <br>
                    <div class="report-header-bg">FEE FORECAST</div>
                     <table class="data-table">
                        <tr><td><strong>Grade 1 Fee</strong></td><td>‚Çπ 1,50,000</td></tr>
                        <tr><td><strong>Grade 12 Fee</strong></td><td>‚Çπ 4,20,000</td></tr>
                    </table>
                </div>
            `;
            
            modal.classList.add('active');
        }

        function closeSampleReport() {
            document.getElementById('sampleReportModal').classList.remove('active');
        }


        // --- STANDARD LOGIC ---
        
        function getIntermediateHeaderHtml() {
             return `<div class="intermediate-header"><div class="max-w-7xl mx-auto"><span class="font-bold text-xl">Apt <span class="text-brand-orange">Skola</span></span></div></div>`;
        }
        function getIntermediateFooterHtml() {
             return `<div class="intermediate-footer"><div class="max-w-7xl mx-auto text-center"><p>&copy; 2025 Apt Skola.</p></div></div>`;
        }

        document.addEventListener('DOMContentLoaded', () => {
             // Injections for headers
             document.getElementById('landingHeaderLogo').innerHTML = `<span class="font-black text-4xl text-white">Apt <span class="text-brand-orange">Skola</span></span>`;
             document.getElementById('detailsHeader').innerHTML = getIntermediateHeaderHtml();
             document.getElementById('detailsFooter').innerHTML = getIntermediateFooterHtml();
             document.getElementById('successHeader').innerHTML = getIntermediateHeaderHtml();
             document.getElementById('successFooter').innerHTML = getIntermediateFooterHtml();
             document.getElementById('paymentHeader').innerHTML = getIntermediateHeaderHtml();
             document.getElementById('paymentFooter').innerHTML = getIntermediateFooterHtml();
        });

        const MASTER_DATA = { 
          cbse: {
            name: "CBSE",
            title: "The Standardized Strategist",
            persona: "Convergent Thinker",
            profile: "This profile is characterized by strong retention memory, the ability to handle high-volume data processing, and a high comfort level with objective assessment metrics.",
            rejectionReason: "Why not IB? Your child prefers structured outcomes. The ambiguity of the IB 'Constructivist' approach may cause unnecessary anxiety.",
            careerPath: "The Competitive Exam Track (JEE/NEET/UPSC). Grade 9-10 Focus: Foundation building using NCERT. Grade 11-12 Focus: Integrated Coaching or Dummy Schools.",
            dailySchedule: [
              { time: "05:30 AM", activity: "Wake up, light revision" },
              { time: "07:30 AM", activity: "School (Math/Science focus)" },
              { time: "03:30 PM", activity: "Coaching/Tuition Center" },
              { time: "07:30 PM", activity: "Self-Study: Daily Practice Papers" },
              { time: "10:30 PM", activity: "Sleep" }
            ]
          },
          icse: {
            name: "ICSE",
            title: "The Holistic Communicator",
            persona: "Verbal Analyst",
            profile: "Students with this archetype display high verbal intelligence, strong analytical skills in humanities, and the ability to synthesize disparate pieces of information into a coherent whole.",
            rejectionReason: "Why not CBSE? Your child thrives on narrative and context. The rote-heavy, objective nature of CBSE might stifle their desire for depth.",
            careerPath: "The Creative & Liberal Arts Track (Law/Design/Journalism). Grade 9-10: Strong emphasis on Literature/Arts. Grade 11-12: Portfolio development and wide reading.",
            dailySchedule: [
              { time: "06:00 AM", activity: "Wake up, review Literature texts" },
              { time: "07:30 AM", activity: "School: English & Lab Practicals" },
              { time: "04:30 PM", activity: "Project Work & Documentation" },
              { time: "07:00 PM", activity: "Study: Concept Application" },
              { time: "09:30 PM", activity: "Reading/Wind Down" }
            ]
          },
          ib: {
            name: "IB",
            title: "The Global Inquirer",
            persona: "Independent Innovator",
            profile: "This cognitive style thrives on openness to experience, exhibits a high tolerance for ambiguity, and possesses the strong self-regulation skills needed for inquiry-based learning.",
            rejectionReason: "Why not CBSE? Your child requires autonomy. The rigid, defined syllabus of CBSE would likely lead to boredom and disengagement.",
            careerPath: "The Global Ivy League/Oxbridge Track. Grade 9-10 (MYP): Critical writing. Grade 11-12 (DP): Building the 'Profile' via CAS and Extended Essay.",
            dailySchedule: [
              { time: "06:30 AM", activity: "Check emails/Global Context news" },
              { time: "08:00 AM", activity: "School: Discussion & TOK" },
              { time: "03:30 PM", activity: "CAS: Sports/NGO Work" },
              { time: "05:00 PM", activity: "Extended Essay Research" },
              { time: "10:00 PM", activity: "Late Night Writing" }
            ]
          },
          financial: {
            inflationRate: "10-12%",
            projectionTable: [
              { grade: "Grade 1 (2025)", fee: "‚Çπ 2,00,000", total: "‚Çπ 2,00,000" },
              { grade: "Grade 5 (2029)", fee: "‚Çπ 2,92,820", total: "‚Çπ 12,21,020" },
              { grade: "Grade 9 (2033)", fee: "‚Çπ 4,28,718", total: "‚Çπ 27,73,184" },
              { grade: "Grade 12 (2036)", fee: "‚Çπ 5,70,623", total: "‚Çπ 43,47,932" }
            ],
            hiddenCosts: [
              "Transport: ‚Çπ40,000 - ‚Çπ80,000/year",
              "Technology Fees: ‚Çπ1-2 Lakhs (Laptops/Tablets for IB)",
              "Field Trips: ‚Çπ1-2 Lakhs per trip",
              "Shadow Coaching (CBSE): ‚Çπ2-4 Lakhs/year"
            ]
          },
          vetting: {
            questions: [
              { q: "What is your annual teacher turnover rate?", flag: "Red Flag Answer: 'We constantly refresh our faculty...' (Code for: We fire expensive teachers.)" },
              { q: "Specific protocol for bullying incidents?", flag: "Red Flag Answer: 'We don't really have bullying here.' (Denial is a safety risk.)" },
              { q: "Instruction for child falling behind?", flag: "Look for specific remedial programs, not generic 'extra classes'." }
            ],
            redFlags: [
              "The 'Tired Teacher' Test: Do teachers look exhausted?",
              "The 'Glossy Brochure' Disconnect: Fancy reception vs. broken furniture.",
              "Restroom Hygiene: The truest test of dignity."
            ]
          },
          concierge: {
            interviewPrep: [
                { category: "The Trap Question", question: "Principal: 'Describe your child's biggest weakness.'", wrongAnswer: "'He is very stubborn.' (Signals behavioral issues)", rightAnswer: "'He is highly determined. Once he sets his mind to a task, he finds it hard to switch gears immediately.'" },
                { category: "The Alignment Question", question: "Principal: 'Why our school specifically?'", wrongAnswer: "'It is close to our house.' (Too generic)", rightAnswer: "'We analyzed your focus on [Board Philosophy]. Since our child is a [Persona Name], your emphasis aligns perfectly.'" }
            ],
            negotiation: [
                { title: "The 'Lump Sum' Leverage", scenario: "Use when you have liquidity.", script: "If I clear the entire annual tuition in a single transaction this week, what is the best concession structure you can offer on the Admission Fee?" },
                { title: "The 'Sibling Pipeline' Pitch", scenario: "Use if enrolling a younger child later.", script: "With my younger child entering Grade 1 next year, we are looking at a 15+ year LTV. Can we discuss a waiver on the security deposit?" }
            ]
          }
        };

        const questions = [
          {
            "id": "q1",
            "text": "How does your child learn best?",
            "options": [
              "By seeing images, videos, and diagrams (Visual)",
              "By listening to stories and discussions (Auditory)",
              "By doing experiments and building things (Kinesthetic)",
              "A mix of everything / Adaptable"
            ]
          },
          {
            "id": "q2",
            "text": "What subject does your child naturally enjoy?",
            "options": [
              "Maths, Logic, and Puzzles",
              "English, Stories, and Art",
              "Science, Nature, and asking 'Why?'",
              "A bit of everything / Balanced"
            ]
          },
          {
            "id": "q3",
            "text": "What is the big future goal?",
            "options": [
              "Crack Indian Exams (IIT-JEE / NEET / UPSC)",
              "Study Abroad (University in US/UK/Canada)",
              "Entrepreneurship or Creative Arts",
              "Not sure yet / Keep options open"
            ]
          },
          {
            "id": "q4",
            "text": "What is your comfortable annual budget for school fees?",
            "options": [
              "Below ‚Çπ1 Lakh",
              "‚Çπ1 Lakh - ‚Çπ3 Lakhs",
              "‚Çπ3 Lakhs - ‚Çπ6 Lakhs",
              "Above ‚Çπ6 Lakhs"
            ]
          },
          {
            "id": "q5",
            "text": "Will you be moving cities in the next few years?",
            "options": [
              "No, we are settled here.",
              "Yes, likely to move within India.",
              "Yes, likely to move to another Country.",
              "Unsure"
            ]
          },
          {
            "id": "q6",
            "text": "What teaching style do you prefer?",
            "options": [
              "Structured: Textbooks and clear syllabus",
              "Inquiry: Research and self-exploration",
              "Flexible: Student-led (like Montessori)",
              "Balanced approach"
            ]
          },
          {
            "id": "q7",
            "text": "How much study load can your child handle?",
            "options": [
              "High Volume (Can memorize lots of details)",
              "Concept Focus (Understands logic, less memory)",
              "Practical Focus (Prefers doing over reading)"
            ]
          },
          {
            "id": "q8",
            "text": "Is 'Global Recognition' important to you?",
            "options": [
              "Yes, it's critical.",
              "It's important.",
              "Nice to have.",
              "Not important."
            ]
          },
          {
            "id": "q9",
            "text": "Should the school focus heavily on Regional Languages?",
            "options": [
              "Yes, they must be fluent in the local language.",
              "Basic functional knowledge is enough.",
              "No, English is the main focus."
            ]
          },
          {
            "id": "q10",
            "text": "How does your child react to exams?",
            "options": [
              "They are competitive and handle pressure well.",
              "They prefer projects and assignments.",
              "They get very anxious about tests."
            ]
          },
          {
            "id": "q11",
            "text": "How important are Sports & Arts?",
            "options": [
              "Very High - Equal to academics.",
              "Moderate - Good for hobbies.",
              "Low - Academics come first."
            ]
          },
          {
            "id": "q12",
            "text": "What grade is your child entering?",
            "options": [
              "Preschool / Kindergarten",
              "Primary (Grades 1-5)",
              "Middle (Grades 6-8)",
              "High School (Grades 9+)"
            ]
          },
          {
            "id": "q13",
            "text": "What class size do you prefer?",
            "options": [
              "Small (Less than 25 kids)",
              "Standard (25-40 kids)",
              "Large (40+ kids)"
            ]
          },
          {
            "id": "q14",
            "text": "How involved do you want to be in homework?",
            "options": [
              "High (I will help daily)",
              "Moderate (Weekly check-ins)",
              "Low (School should manage it)"
            ]
          },
          {
            "id": "q15",
            "text": "Where are you looking for schools?",
            "options": [
              "Metro City (Delhi, Mumbai, Hyd, etc.)",
              "Tier-2 City (Jaipur, Vizag, etc.)",
              "Small Town / Rural Area"
            ]
          }
        ];
        
        const totalQuestions = questions.length;

        function calculateFullRecommendation(answers) {
            let scores = { "CBSE": 0, "ICSE": 0, "IB": 0, "Cambridge (IGCSE)": 0, "State Board": 0 };
            let veto = { ib: false, cambridge: false, icse: false };

            if (answers.q1 === 0) { scores["IB"] += 6; scores["Cambridge (IGCSE)"] += 6; scores["ICSE"] += 4; } 
            if (answers.q1 === 1) { scores["CBSE"] += 6; scores["State Board"] += 5; scores["ICSE"] += 4; } 
            if (answers.q1 === 2) { scores["IB"] += 8; scores["Cambridge (IGCSE)"] += 8; } 
            if (answers.q1 === 3) { scores["CBSE"] += 4; scores["ICSE"] += 4; } 

            if (answers.q2 === 0) { scores["CBSE"] += 7; scores["State Board"] += 5; } 
            if (answers.q2 === 1) { scores["ICSE"] += 7; scores["IB"] += 6; } 
            if (answers.q2 === 2) { scores["IB"] += 7; scores["Cambridge (IGCSE)"] += 7; } 
            if (answers.q2 === 3) { scores["ICSE"] += 5; scores["CBSE"] += 5; } 

            if (answers.q3 === 0) { scores["CBSE"] += 20; scores["State Board"] += 15; scores["IB"] -= 10; }
            if (answers.q3 === 1) { scores["IB"] += 20; scores["Cambridge (IGCSE)"] += 20; scores["CBSE"] -= 5; }
            if (answers.q3 === 2) { scores["IB"] += 10; scores["ICSE"] += 8; }

            if (answers.q4 === 0) { veto.ib = true; veto.cambridge = true; scores["State Board"] += 10; scores["CBSE"] += 5; }
            if (answers.q4 === 1) { veto.ib = true; scores["CBSE"] += 8; scores["ICSE"] += 8; }
            if (answers.q4 === 2) { scores["ICSE"] += 5; scores["Cambridge (IGCSE)"] += 5; }
            if (answers.q4 === 3) { scores["IB"] += 10; scores["Cambridge (IGCSE)"] += 10; }

            if (answers.q5 === 1) scores["CBSE"] += 15; 
            if (answers.q5 === 2) { scores["IB"] += 15; scores["Cambridge (IGCSE)"] += 15; } 

            if (answers.q6 === 0) { scores["CBSE"] += 8; scores["State Board"] += 8; } 
            if (answers.q6 === 1) { scores["IB"] += 10; scores["Cambridge (IGCSE)"] += 8; } 
            if (answers.q6 === 2) { scores["IB"] += 8; } 

            if (answers.q7 === 0) { scores["CBSE"] += 8; scores["State Board"] += 5; } 
            if (answers.q7 === 1) { scores["ICSE"] += 6; scores["IB"] += 4; }
            if (answers.q7 === 2) { scores["IB"] += 6; scores["Cambridge (IGCSE)"] += 6; } 
            
            if (answers.q8 === 0) { scores["IB"] += 10; scores["Cambridge (IGCSE)"] += 8; }
            if (answers.q8 === 1) { scores["ICSE"] += 5; }

            if (answers.q9 === 0) { scores["State Board"] += 10; scores["ICSE"] += 5; } 
            if (answers.q9 === 2) { scores["IB"] += 5; scores["Cambridge (IGCSE)"] += 5; }

            if (answers.q10 === 0) { scores["CBSE"] += 8; scores["ICSE"] += 4; }
            if (answers.q10 === 1) { scores["IB"] += 8; scores["ICSE"] += 6; }

            if (answers.q11 === 0) { scores["ICSE"] += 6; scores["IB"] += 6; }
            if (answers.q11 === 2) { scores["CBSE"] += 6; }

            if (answers.q12 === 0) { scores["IB"] += 5; scores["ICSE"] += 5; } 

            if (answers.q13 === 0) { scores["IB"] += 5; scores["Cambridge (IGCSE)"] += 5; } 

            if (answers.q14 === 0) { scores["ICSE"] += 5; scores["CBSE"] += 3; } 

            if (answers.q15 === 2) { scores["State Board"] += 5; scores["CBSE"] += 3; veto.ib = true; veto.cambridge = true; }
            if (answers.q15 === 0) { scores["IB"] += 5; scores["Cambridge (IGCSE)"] += 5; } 


            let results = Object.keys(scores).map(board => { return { name: board, score: scores[board] }; });
            results.forEach(r => {
                if (veto.ib && (r.name === "IB" || r.name === "Cambridge (IGCSE)")) r.score = -999;
                if (veto.cambridge && r.name === "Cambridge (IGCSE)") r.score = -999;
                if (veto.icse && r.name === "ICSE") r.score = -999;
            });
            results.sort((a, b) => b.score - a.score);
            
            let topScore = Math.max(results[0].score, 1);
            results.forEach(r => {
                if (r.score < 0) { r.percentage = 0; } else { r.percentage = Math.min(Math.round((r.score / topScore) * 95), 99); }
            });

            return { recommended: results[0], alternative: results[1], fullRanking: results };
        }

        function selectPackage(pkg, price) {
            selectedPackage = pkg;
            selectedPrice = price;
            document.getElementById('landingPage').classList.add('hidden');
            initializeQuizShell(0);
            window.scrollTo({ top: 0, behavior: 'instant' });
        }

        function initializeQuizShell(index) {
            const shellHtml = `
                <div id="questionPageApp" class="question-page active">
                    ${getIntermediateHeaderHtml()}
                    <div class="question-content-wrapper"><div id="dynamicQuizContent" class="question-container"></div></div>
                    ${getIntermediateFooterHtml()}
                </div>`;
            document.getElementById('questionPages').innerHTML = shellHtml;
            renderQuestionContent(index);
        }

        function renderQuestionContent(index) {
            if(index >= questions.length) { 
                document.getElementById('questionPageApp').classList.remove('active');
                showDetailsPage(); 
                return; 
            }
            const q = questions[index];
            const optionsHTML = q.options.map((opt, i) => `
                <div class="option-card ${answers[q.id] === i ? 'selected' : ''}" onclick="selectOption('${q.id}', ${i}, ${index}, this)">${opt}</div>
            `).join('');

            document.getElementById('dynamicQuizContent').innerHTML = `
                <div class="progress-container"><div class="progress-track"><div class="progress-fill" style="width: ${((index + 1) / questions.length * 100).toFixed(0)}%"></div></div></div>
                <div class="question-text">${q.text}</div>
                <div class="options-grid">${optionsHTML}</div>
            `;
            currentQuestion = index;
        }

        function selectOption(qId, val, idx, el) {
            answers[qId] = val;
            el.classList.add('selected');
            setTimeout(() => { renderQuestionContent(idx + 1); }, 300);
        }

        function showDetailsPage() {
            document.getElementById('detailsPage').classList.remove('hidden');
            document.getElementById('detailsPage').classList.add('active');
            if(selectedPackage === 'Platinum') document.getElementById('pincodeGroup').style.display = 'block';
            else document.getElementById('pincodeGroup').style.display = 'none';
        }

        // --- UPDATED FORM SUBMIT WITH NETLIFY HANDLING (EVENT 1) ---
        document.getElementById('customerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const loadingMsg = document.getElementById('loadingMsg');
            
            btn.disabled = true; btn.innerText = "Saving Data...";
            loadingMsg.style.display = 'block';
            
            customerData = {
                parentName: document.getElementById('parentName').value,
                childName: document.getElementById('childName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                package: selectedPackage,
                amount: selectedPrice
            };

            // Helper to transition to next page
            const proceedToPayment = () => {
                setTimeout(() => {
                    document.getElementById('summaryPackage').textContent = selectedPackage;
                    document.getElementById('summaryPrice').textContent = `‚Çπ${selectedPrice}`;
                    document.getElementById('summaryTotal').textContent = `‚Çπ${selectedPrice}`;
                    
                    document.getElementById('detailsPage').classList.remove('active');
                    document.getElementById('detailsPage').classList.add('hidden');
                    
                    document.getElementById('paymentPageContainer').classList.remove('hidden');
                    document.getElementById('paymentPageContainer').classList.add('active');
                    
                    loadingMsg.style.display = 'none';
                    btn.disabled = false; btn.innerText = "Proceed to Payment ‚Üí";
                    window.scrollTo({ top: 0, behavior: 'instant' });
                }, 1000);
            };

            // NETLIFY FORM SUBMISSION VIA AJAX
            const myForm = e.target;
            const formData = new FormData(myForm);
            formData.append('form-name', 'lead-capture'); // Explicitly needed for JS fetch
            formData.append('package', selectedPackage);
            formData.append('amount', selectedPrice);

            // Attempt fetch
            try {
                if (window.location.protocol === 'blob:' || window.location.href.includes('usercontent')) {
                    console.log("Preview environment: Skipping Netlify fetch, proceeding directly.");
                    proceedToPayment();
                } else {
                    fetch("/", {
                        method: "POST",
                        headers: { "Content-Type": "application/x-www-form-urlencoded" },
                        body: new URLSearchParams(formData).toString(),
                    })
                    .then(() => {
                        console.log("Form successfully submitted to Netlify");
                        proceedToPayment();
                    })
                    .catch((error) => {
                        console.warn("Netlify Form Submission failed. Proceeding anyway.");
                        proceedToPayment();
                    });
                }
            } catch (syncError) {
                proceedToPayment();
            }
        });

        // Razorpay Logic
        function redirectToRazorpay() {
            const payButton = document.getElementById('payButton');
            const loadingMsg = document.getElementById('paymentProcessing');
            
            payButton.disabled = true;
            payButton.classList.add('hidden');
            loadingMsg.style.display = 'block';

            // Find amount in paise
            const amount = PACKAGE_PRICES[selectedPackage];
            
            if (!amount) {
                alert("Error: Package price not found.");
                return;
            }

            const options = {
                "key": RAZORPAY_KEY_ID, 
                "amount": amount, 
                "currency": "INR",
                "name": "Apt Skola",
                "description": `${selectedPackage} Plan`,
                "image": "https://www.aptskola.com/images/logo.png",
                "handler": async function (response) {
                    // --- MODIFIED SUCCESS HANDLER ---
                    
                    // 1. UI Feedback: Prevent closing tab
                    const btn = document.getElementById('payButton');
                    if(btn) {
                        btn.classList.remove('hidden');
                        btn.disabled = true;
                        btn.innerText = "Generating Report...";
                    }
                    if(document.getElementById('paymentProcessing')) {
                        document.getElementById('paymentProcessing').innerText = "Payment Successful! Generating PDF...";
                        document.getElementById('paymentProcessing').style.display = 'block';
                    }

                    try {
                        // 2. Render report invisibly to ensure DOM elements exist for capture
                        // FIX: This now renders to the div at the bottom of the body (visible to DOM, hidden to user)
                        renderReportToBrowser(); 
                        
                        // 3. Generate PDF Base64 (Reusing logic from downloadShareReport but getting string)
                        const { jsPDF } = window.jspdf;
                        const pdf = new jsPDF('p', 'mm', 'a4');
                        const pdfWidth = pdf.internal.pageSize.getWidth();
                        const pdfHeight = pdf.internal.pageSize.getHeight();
                        const margin = 10;
                        let currentY = margin;

                        // Capture Header
                        const pdfHeader = document.getElementById('pdf-header');
                        if(pdfHeader) {
                            pdfHeader.style.display = 'block'; 
                            // FIX: Use JPEG at 0.8 quality to reduce file size significantly
                            const headerCanvas = await html2canvas(pdfHeader, { scale: 2 });
                            pdfHeader.style.display = 'none'; 
                            
                            const headerImgData = headerCanvas.toDataURL('image/jpeg', 0.8);
                            const headerHeight = (headerCanvas.height * (pdfWidth - 2*margin)) / headerCanvas.width;
                            pdf.addImage(headerImgData, 'JPEG', margin, currentY, pdfWidth - 2*margin, headerHeight);
                            currentY += headerHeight + 5;
                        }

                        // Iterate Cards
                        // FIX: #reportPreview is now always accessible in DOM (not hidden by parent)
                        const cards = document.querySelectorAll('#reportPreview .report-card');
                        for (let i = 0; i < cards.length; i++) {
                            const card = cards[i];
                            // FIX: Use JPEG at 0.8 quality
                            const canvas = await html2canvas(card, { scale: 2, backgroundColor: '#ffffff' });
                            const imgData = canvas.toDataURL('image/jpeg', 0.8);
                            const imgHeight = (canvas.height * (pdfWidth - 2*margin)) / canvas.width;

                            if (currentY + imgHeight > pdfHeight - margin) {
                                pdf.addPage();
                                currentY = margin; 
                            }
                            pdf.addImage(imgData, 'JPEG', margin, currentY, pdfWidth - 2*margin, imgHeight);
                            currentY += imgHeight + 5; 
                        }

                        // 4. Get PDF Data String
                        const pdfDataString = pdf.output('datauristring');

                        // 5. Send to Backend Email Function
                        console.log("Sending email...");
                        await fetch('/.netlify/functions/send-email', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                userEmail: customerData.email,
                                userName: customerData.parentName || "Parent",
                                pdfBase64: pdfDataString
                            })
                        });
                        console.log("Email sent request completed.");

                    } catch (err) {
                        console.error("Error during PDF generation or email sending:", err);
                        // We proceed to show success page even if email fails, so user gets their report
                    } finally {
                        // 6. Final Redirect / Show Success
                        showInstantSuccessPage();
                    }
                },
                "prefill": { "name": customerData.parentName, "email": customerData.email, "contact": customerData.phone },
                "theme": { "color": "#FF6B35" },
                "modal": {
                    "ondismiss": function(){ 
                        console.log('Payment popup closed'); 
                        payButton.disabled = false;
                        payButton.classList.remove('hidden');
                        loadingMsg.style.display = 'none';
                    }
                }
            };
            const rzp1 = new Razorpay(options);
            rzp1.on('payment.failed', function (response){
                alert("Payment Failed: " + response.error.description);
                payButton.disabled = false;
                payButton.classList.remove('hidden');
                loadingMsg.style.display = 'none';
            });
            rzp1.open();
        }

        function showInstantSuccessPage() {
            document.getElementById('paymentPageContainer').classList.remove('active');
            document.getElementById('paymentPageContainer').classList.add('hidden');
            document.getElementById('successPage').classList.remove('hidden');
            document.getElementById('successPage').classList.add('active');
            document.getElementById('successParentName').innerText = customerData.parentName || 'Parent';
            
            // Ensure report is rendered (in case skipping payment for testing)
            renderReportToBrowser();
            
            // FIX: Move the report from off-screen bottom back into the Success Container so the user can see it
            const reportDiv = document.getElementById('reportPreview');
            const successContainer = document.querySelector('.success-container');
            const downloadBtn = document.getElementById('downloadShareBtn');
            
            if(reportDiv && successContainer && downloadBtn) {
                // Remove the special off-screen class
                reportDiv.classList.remove('off-screen-render');
                // Move it to after the Download button
                downloadBtn.parentNode.insertBefore(reportDiv, downloadBtn.nextSibling);
            }
            
            closeModal(); // Ensure payment modal is hidden
            window.scrollTo({ top: 0, behavior: 'instant' });
        }
        
        // --- INTERACTIVE FUNCTIONS FOR FEEDBACK FORM ---
        function selectStar(rating) {
            feedbackData.stars = rating;
            const wrappers = document.querySelectorAll('#starContainer .star-wrapper');
            const text = document.getElementById('starText');
            const labels = ["Poor", "Fair", "Good", "Very Good", "Excellent"];

            wrappers.forEach((wrap, idx) => {
                const star = wrap.querySelector('.star-svg');
                if (idx < rating) {
                    wrap.classList.add('star-active');
                } else {
                    wrap.classList.remove('star-active');
                }
                
                if(idx === rating - 1) {
                    star.classList.remove('pop-anim');
                    void star.offsetWidth; // Trigger reflow
                    star.classList.add('pop-anim');
                }
            });
            
            text.innerText = labels[rating - 1];
            text.classList.remove('opacity-0');
        }

        function selectChoice(btn) {
            feedbackData.timeSaved = btn.innerText;
            const parent = btn.parentElement;
            const buttons = parent.querySelectorAll('.choice-btn');
            buttons.forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }

        function selectNPS(selectedBtn) {
            feedbackData.nps = selectedBtn.innerText;
            const buttons = document.querySelectorAll('.nps-btn');
            const selectedValue = parseInt(selectedBtn.innerText);
            
            buttons.forEach(btn => {
                const btnValue = parseInt(btn.innerText);
                if (btnValue <= selectedValue) {
                    btn.classList.add('selected');
                } else {
                    btn.classList.remove('selected');
                }
            });
        }

        // --- UPDATED FEEDBACK SUBMISSION (EVENT 2) ---
        function submitFeedback() {
            const btn = document.querySelector('button[onclick="submitFeedback()"]');
            btn.innerText = "Sending...";
            btn.disabled = true;

            // 1. Prepare Data for Netlify
            const formData = new FormData();
            formData.append('form-name', 'feedback_form'); // Must match the hidden HTML form name
            
            // Link to the user who paid (from the first form)
            formData.append('parent_name', customerData.parentName || 'Anonymous');
            formData.append('parent_email', customerData.email || 'no-email');
            
            // Feedback values
            formData.append('rating_stars', feedbackData.stars);
            formData.append('time_saved', feedbackData.timeSaved);
            formData.append('nps_score', feedbackData.nps);
            
            // Get text area value manually
            const textArea = document.querySelector('.custom-input');
            if(textArea) formData.append('unanswered_question', textArea.value);

            // 2. Submit via AJAX
            fetch("/", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: new URLSearchParams(formData).toString(),
            })
            .then(() => {
                // Show Success Message
                const successMsg = document.getElementById('successMessage');
                successMsg.classList.remove('hidden');
                btn.innerText = "Submitted";
                setTimeout(() => { successMsg.classList.add('hidden'); }, 3000);
            })
            .catch((error) => {
                console.error(error);
                alert("Could not send feedback. Please try again.");
                btn.innerText = "Submit Feedback";
                btn.disabled = false;
            });
        }

        function renderReportToBrowser() {
            const res = calculateFullRecommendation(answers);
            let recBoard = res.recommended.name;
            let boardKey = 'cbse';
            if (recBoard.includes('ICSE')) boardKey = 'icse';
            else if (recBoard.includes('IB') || recBoard.includes('Cambridge')) boardKey = 'ib';
            
            const data = MASTER_DATA[boardKey] || MASTER_DATA['cbse'];
            
            const isPremium = selectedPackage === 'Premium' || selectedPackage === 'Platinum';
            const isPlatinum = selectedPackage === 'Platinum';
            
            let planTitle = "The Decision Decoder";
            if(isPremium) planTitle = "The Smart Parent Toolkit";
            if(isPlatinum) planTitle = "The Executive Advantage"; 

            // Helper for Feature Comparison
            const getFeature = (board, type) => {
                const features = {
                    'CBSE': { curr: 'Standardized', flex: 'Moderate', assess: 'Exam-Focused' },
                    'ICSE': { curr: 'Comprehensive', flex: 'Low', assess: 'Detailed' },
                    'IB': { curr: 'Inquiry-Based', flex: 'High', assess: 'Continuous' },
                    'Cambridge (IGCSE)': { curr: 'International', flex: 'High', assess: 'Application' },
                    'State Board': { curr: 'Regional', flex: 'Low', assess: 'Rote-Based' }
                };
                let key = 'CBSE';
                if(board.includes('ICSE')) key = 'ICSE';
                if(board.includes('IB')) key = 'IB';
                if(board.includes('Cambridge')) key = 'Cambridge (IGCSE)';
                if(board.includes('State')) key = 'State Board';
                return features[key]?.[type] || 'N/A';
            };

            const getAnsText = (qId) => {
                const q = questions.find(x => x.id === qId);
                return (q && answers[qId] !== undefined) ? q.options[answers[qId]] : "N/A";
            };

            // Generate NPS Buttons HTML String (0-10)
            const npsButtonsHTML = Array.from({length: 11}, (_, i) => 
                `<div class="nps-btn" onclick="selectNPS(this)">${i}</div>`
            ).join('');

            let html = `
                <div id="pdf-header" style="display:none; background:#0F172A; color:white; padding:30px; text-align:center; margin-bottom:30px; border-radius:12px;">
                    <div style="font-size:2rem; font-weight:800;">Apt <span style="color:var(--sunrise-primary);">Skola</span></div>
                    <div style="font-size:1.2rem;">${planTitle}</div>
                    <div style="font-size:0.9rem; margin-top:10px;">Prepared for: ${customerData.childName}</div>
                </div>

                <div class="report-card" style="background:var(--navy-premium); color:white; border:none;">
                    <div style="opacity:0.8; font-size:0.9rem; text-transform:uppercase; letter-spacing:1px;">${planTitle}</div>
                    <div style="font-size:2rem; font-weight:800; margin:10px 0;">${data.title}</div>
                    <div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:8px;">
                        Recommended: <span style="color:var(--sunrise-primary); font-weight:bold;">${recBoard}</span>
                    </div>
                </div>

                <div class="report-card">
                    <div class="report-header-bg">STUDENT PERSONA</div>
                    <div class="narrative-item">
                        <h3 class="narrative-theme">Cognitive Style: ${data.persona}</h3>
                        <p>${data.profile}</p>
                    </div>
                </div>

                <div class="report-card">
                    <div class="report-header-bg">CHILD'S PROFILE SUMMARY</div>
                    <table class="data-table">
                        <tr><td><strong>Learning Style</strong></td><td>${getAnsText('q1')}</td></tr>
                        <tr><td><strong>Core Interest</strong></td><td>${getAnsText('q2')}</td></tr>
                        <tr><td><strong>Future Goal</strong></td><td>${getAnsText('q3')}</td></tr>
                        <tr><td><strong>Budget Range</strong></td><td>${getAnsText('q4')}</td></tr>
                    </table>
                </div>

                <div class="report-card">
                    <div class="report-header-bg">BOARD & OPTION COMPARISON</div>
                    <table class="data-table">
                        <thead><tr><th>Board</th><th>Match %</th><th>Status</th></tr></thead>
                        <tbody>
                            ${res.fullRanking.slice(0,3).map((r, i) => `
                                <tr>
                                    <td>${r.name}</td>
                                    <td>${r.percentage}%</td>
                                    <td style="color:${i===0 ? 'var(--verified-green)' : 'inherit'}; font-weight:${i===0 ? 'bold' : 'normal'}">
                                        ${i===0 ? 'Recommended' : 'Alternative'}
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    <div style="margin-top:20px; padding:10px; background-color:#fff3cd; color:#555555; font-style:italic; border-left:4px solid #333; border-radius:0 5px 5px 0; font-size:0.9rem;">
                        Expert Note on Special Needs: Generally, <strong>CBSE</strong> is recommended over ICSE for students with learning challenges due to significantly lighter syllabus volume. However, for maximum flexibility (like skipping Math or Science entirely), consider the National Institute of Open Schooling (NIOS). It is a recognizedNational Institute of Open Schooling (<strong>NIOS</strong>). It is a recognized Central Government Board in India (just like CBSE), but without the walls. or International General Certificate of Secondary Education (IGCSE) (usually Cambridge Board). The UK/International curriculum. Expensive, elite, and practical.
                    </div>
                    </div>

                <div class="report-card">
                    <div class="report-header-bg">DETAILED FEATURE COMPARISON</div>
                    <table class="data-table">
                        <thead><tr><th>Feature</th><th>${recBoard} (Rec)</th><th>${res.alternative ? res.alternative.name : 'Alt'}</th></tr></thead>
                        <tbody>
                            <tr><td>Curriculum</td><td>${getFeature(recBoard, 'curr')}</td><td>${getFeature(res.alternative?.name || '', 'curr')}</td></tr>
                            <tr><td>Flexibility</td><td>${getFeature(recBoard, 'flex')}</td><td>${getFeature(res.alternative?.name || '', 'flex')}</td></tr>
                            <tr><td>Assessment</td><td>${getFeature(recBoard, 'assess')}</td><td>${getFeature(res.alternative?.name || '', 'assess')}</td></tr>
                        </tbody>
                    </table>
                </div>
            `;

            // TOOLKIT SECTION (Moved Up per user request to be before Fees)
            html += `
                <div class="report-card">
                    <div class="report-header-bg">YOUR SCHOOL SCOUTING TOOLKIT</div>
                    <div style="display:grid; grid-template-columns: 1fr; gap: 30px;">
                        <div>
                            <h3 class="narrative-theme">üßê 5-Point Observation Checklist</h3>
                            <ul style="list-style:none; padding:0;">
                               <li style="margin-bottom:10px; display:flex; gap:10px;"><span>‚úÖ</span> <div><strong>The 'Tired Teacher' Test:</strong> Do faculty look exhausted or engaged?</div></li>
                               <li style="margin-bottom:10px; display:flex; gap:10px;"><span>‚úÖ</span> <div><strong>Restroom Hygiene:</strong> The truest indicator of student dignity.</div></li>
                               <li style="margin-bottom:10px; display:flex; gap:10px;"><span>‚úÖ</span> <div><strong>Safety Protocols:</strong> Is security proactive or just a logbook?</div></li>
                               <li style="margin-bottom:10px; display:flex; gap:10px;"><span>‚úÖ</span> <div><strong>Student Interaction:</strong> Are kids fearful or free-spirited?</div></li>
                               <li style="margin-bottom:10px; display:flex; gap:10px;"><span>‚úÖ</span> <div><strong>Library Status:</strong> Is it a dusty museum or an active hub?</div></li>
                            </ul>
                        </div>
                        <div style="margin-top:10px;">
                            <h3 class="narrative-theme">üó£Ô∏è 3 Golden Questions to Ask</h3>
                            <div style="background:#f1f5f9; padding:15px; border-radius:8px; margin-bottom:10px;">
                                <strong>1. Teacher Turnover:</strong> "What is your annual attrition rate? (If >15%, why?)"
                            </div>
                            <div style="background:#f1f5f9; padding:15px; border-radius:8px; margin-bottom:10px;">
                                <strong>2. Support Systems:</strong> "How exactly do you handle a child falling behind? (Seek specifics, not generic 'extra classes')."
                            </div>
                            <div style="background:#f1f5f9; padding:15px; border-radius:8px;">
                                <strong>3. Real Validation:</strong> "Can I speak to a parent whose child is currently in Grade 10?"
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // NEW CONDITIONAL SECTIONS (1499 & 2499)
            if (selectedPrice >= 1499) {
                html += `
                    <div class="report-card">
                        <div class="report-header-bg">THE 'ZERO-PANIC' DOCUMENT MASTERLIST</div>
                        <div class="dna-points" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:15px;">
                            <div class="dna-point">Birth Certificate (Original + 3 attested copies)</div>
                            <div class="dna-point">Aadhar Card (Child + Parents)</div>
                            <div class="dna-point">Address Proof (Passport/Rent Agreement)</div>
                            <div class="dna-point">Immunization Record</div>
                            <div class="dna-point">Passport Photos (8 Child, 4 Parents)</div>
                            <div class="dna-point">Glue stick & Stapler</div>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-header-bg">THE FAKE SCHOOL RADAR</div>
                        <div class="narrative-item" style="border-left-color:var(--urgent-red);">
                            <ul style="list-style:none; padding:0;">
                                <li style="margin-bottom:12px; display:flex; gap:10px;">
                                    <span style="font-size:1.2rem;">üö©</span> 
                                    <div><strong>Library Check:</strong> Are there fewer books than students? (Prop vs Resource)</div>
                                </li>
                                <li style="margin-bottom:12px; display:flex; gap:10px;">
                                    <span style="font-size:1.2rem;">üö©</span> 
                                    <div><strong>The Grade 10 Test:</strong> Can they show Board Results for the last 3 years?</div>
                                </li>
                                <li style="display:flex; gap:10px;">
                                    <span style="font-size:1.2rem;">üö©</span> 
                                    <div><strong>The AC Trap:</strong> Is the AC only in the reception area but not classrooms?</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                `;
            }

            // NEW CONDITIONAL SECTION (2499 ONLY)
            if (selectedPrice >= 2499) {
                html += `
                    <div class="report-card">
                        <div class="report-header-bg">CHILD PREP GAMES (NO-TEARS INTERVIEW)</div>
                        <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                            <div style="background:#f8fafc; padding:20px; border-radius:12px; border-left:4px solid var(--verified-green); box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                                <h4 style="font-weight:700; color:var(--navy-premium); margin-bottom:8px;">Game 1: The Handshake</h4>
                                <p style="font-size:0.9rem; color:var(--navy-light);">Practice firm grip + eye contact.</p>
                            </div>
                            <div style="background:#f8fafc; padding:20px; border-radius:12px; border-left:4px solid var(--verified-green); box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                                <h4 style="font-weight:700; color:var(--navy-premium); margin-bottom:8px;">Game 2: The Favorite Toy</h4>
                                <p style="font-size:0.9rem; color:var(--navy-light);">Practice describing a toy in 3 sentences.</p>
                            </div>
                            <div style="background:#f8fafc; padding:20px; border-radius:12px; border-left:4px solid var(--verified-green); box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                                <h4 style="font-weight:700; color:var(--navy-premium); margin-bottom:8px;">Game 3: Simon Says</h4>
                                <p style="font-size:0.9rem; color:var(--navy-light);">Practice listening to instructions.</p>
                            </div>
                        </div>
                    </div>
                `;
            }

            if(isPremium) {
                html += `
                    <div class="report-card">
                        <div class="report-header-bg">FEE FORECASTER</div>
                        <div class="insight-block">
                            <div class="insight-title"><span style="font-size:1.2rem;">üí°</span> The "10% Rule" of Indian Schools</div>
                            <div class="insight-body">Most parents budget for Grade 1, but smart parents prepare for Grade 12. Because school fees compound annually, the cost often doubles every 6 to 7 years.</div>
                        </div>
                        <div class="narrative-item" style="border-left-color:var(--urgent-red);">
                            <h3 class="narrative-theme" style="color:var(--urgent-red);">‚ö†Ô∏è Inflation: ${MASTER_DATA.financial.inflationRate}</h3>
                        </div>
                        <table class="data-table">
                            <thead><tr><th>Grade</th><th>Est. Fee</th><th>Total</th></tr></thead>
                            <tbody>${MASTER_DATA.financial.projectionTable.map(r => `<tr><td>${r.grade}</td><td>${r.fee}</td><td>${r.total}</td></tr>`).join('')}</tbody>
                        </table>
                    </div>
                `;
            }

            if(isPlatinum) {
                html += `
                    <div class="report-card" style="border:2px solid var(--star-yellow);">
                        <div class="report-header-bg" style="background:var(--star-yellow); color:var(--navy-premium);">
                            THE EXECUTIVE ADVANTAGE
                        </div>
                        <h3 class="narrative-theme">üéôÔ∏è Interview War Room</h3>
                        ${MASTER_DATA.concierge.interviewPrep.map(p => `
                            <div style="margin-bottom:15px; background:#f8fafc; padding:10px; border-radius:8px;">
                                <strong>"${p.question}"</strong><br><span style="color:green">‚úÖ Say: ${p.rightAnswer}</span>
                            </div>
                        `).join('')}
                        <h3 class="narrative-theme" style="margin-top:20px;">üí∞ Negotiation Protocols</h3>
                        ${MASTER_DATA.concierge.negotiation.map(n => `
                            <div class="script-box"><strong>${n.title}:</strong> "${n.script}"</div>
                        `).join('')}
                    </div>
                `;
            }

            // FAQ
            html += `
                <div class="report-card">
                    <div class="report-header-bg">FREQUENTLY ASKED QUESTIONS</div>
                    <div class="faq-item">
                        <div class="faq-q">Q: Which board is best for competitive exams like JEE and NEET?</div>
                        <div class="faq-a">A: CBSE is widely considered the most aligned with Indian competitive exams like JEE and NEET, as the syllabus for these entrance tests is largely based on the NCERT curriculum used by CBSE schools.</div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-q">Q: I have a transferable job. Which board should I choose?</div>
                        <div class="faq-a">A: CBSE is the safest option for parents with frequent transfers. It has the highest number of affiliated schools across India (and abroad), ensuring your child can continue the same curriculum seamlessly in a new city.</div>
                    </div>
                    <div class="faq-item" style="border-bottom:none;">
                        <div class="faq-q">Q: Are State Boards valid for future employment?</div>
                        <div class="faq-a">A: Yes, State Board certifications are fully valid for all government jobs, competitive exams, and higher education in India. However, the syllabus quality and English proficiency standards can vary significantly between states.</div>
                    </div>
                </div>
            `;

            // DISCLAIMER BLOCK (Keeping the content here to fulfill the requirement of showing the full report)
            html += `
                <div class="legal-disclaimer report-card" style="border-top:none; text-align:center; padding-top:10px; margin-top:10px;">
                    Disclaimer: This report is generated exclusively based on the specific inputs provided by the user. The recommendations herein are algorithmic suggestions intended to guide your decision-making process. We strongly advise verifying current fee structures and admission criteria directly with schools, as these are subject to change.
                </div>
            `;
            
            document.getElementById('reportPreview').innerHTML = html;
        }
        
        function closeModal() { 
            document.getElementById('paymentModal').classList.remove('active');
            document.getElementById('paymentStatusText').innerText = 'Awaiting payment confirmation...';
        }
        
        /**
         * @function downloadShareReport - Combines PDF generation, native share, and local download fallback.
         */
        async function downloadShareReport() {
            const btn = document.getElementById('downloadShareBtn');
            const originalText = btn.innerText;
            btn.innerText = "Generating PDF...";
            btn.disabled = true;

            const PDF_FILENAME = `AptSkola-Admission-Toolkit.pdf`;
			const SHARE_TITLE = 'AptSkola School Board Report';
            const SHARE_TEXT = 'Here is the scientific admission toolkit for our child generated by Apt Skola.';

            try {
                // 1. PDF Generation (Keep existing logic intact)
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                const margin = 10;
                let currentY = margin;

                // Capture Header
                const pdfHeader = document.getElementById('pdf-header');
                pdfHeader.style.display = 'block'; 
                // FIX: Use JPEG at 0.8 quality
                const headerCanvas = await html2canvas(pdfHeader, { scale: 2 });
                pdfHeader.style.display = 'none'; 
                
                const headerImgData = headerCanvas.toDataURL('image/jpeg', 0.8);
                const headerHeight = (headerCanvas.height * (pdfWidth - 2*margin)) / headerCanvas.width;
                pdf.addImage(headerImgData, 'JPEG', margin, currentY, pdfWidth - 2*margin, headerHeight);
                currentY += headerHeight + 5;

                // Iterate Cards
                const cards = document.querySelectorAll('#reportPreview .report-card');
                for (let i = 0; i < cards.length; i++) {
                    const card = cards[i];
                    // FIX: Use JPEG at 0.8 quality
                    const canvas = await html2canvas(card, { scale: 2, backgroundColor: '#ffffff' });
                    const imgData = canvas.toDataURL('image/jpeg', 0.8);
                    const imgHeight = (canvas.height * (pdfWidth - 2*margin)) / canvas.width;

                    if (currentY + imgHeight > pdfHeight - margin) {
                        pdf.addPage();
                        currentY = margin; 
                    }
                    pdf.addImage(imgData, 'JPEG', margin, currentY, pdfWidth - 2*margin, imgHeight);
                    currentY += imgHeight + 5; 
                }

                // Add Footer
                const footerText = "¬© 2025 Apt Skola. All Rights Reserved. | support@aptskola.com";
                pdf.setFontSize(8);
                pdf.setTextColor(150);
                pdf.text(footerText, pdfWidth / 2, pdfHeight - 10, { align: 'center' });
                
                // 2. Sharing Logic (New Step)
                const pdfBlob = pdf.output('blob'); // Get PDF as Blob
                const file = new File([pdfBlob], PDF_FILENAME, { type: "application/pdf" });

                if (navigator.canShare && navigator.canShare({ files: [file] })) {
                    // Use native share API
                    await navigator.share({
                        files: [file],
                        title: SHARE_TITLE,
                        text: SHARE_TEXT
                    }).then(() => {
                        console.log('Shared successfully');
                    }).catch((error) => {
                        // If share fails or user cancels, fallback to force download
                        console.log('Share failed or canceled, falling back to download:', error);
                        pdf.save(`AptSkola-${customerData.childName || 'Report'}.pdf`);
                    });
                } else {
                    // Fallback for Desktop: Just Download
                    pdf.save(PDF_FILENAME);
                }

            } catch (err) {
                console.error("Error during report generation or sharing:", err);
                alert("Error generating or sharing report. Please try again.");
            } finally {
                btn.innerText = originalText;
                btn.disabled = false;
            }
        }
        
		function shareReport() {
			if (navigator.share) {
				// Native Share (Mobile)
				navigator.share({
					title: 'Apt Skola Recommendation',
					text: 'I just found the perfect school board for my child with Apt Skola!',
					url: "https://aptskola.com"
				}).catch(console.error);
			} else {
        // Fallback (Desktop)
        navigator.clipboard.writeText("https://aptskola.com");
			alert("Link copied to clipboard!");
			}
		}
        
        // --- SOCIAL SHARING FUNCTIONS ---
        function shareToWhatsApp() {
            const text = encodeURIComponent("I just found the perfect school board for my child using Apt Skola! It's a game changer. Check it out:");
            const url = encodeURIComponent("https://aptskola.com");
            window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');
        }
        function shareToFacebook() {
            const url = encodeURIComponent("https://aptskola.com");
            const text = encodeURIComponent("I just found the perfect school board for my child using Apt Skola!");
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
        }
        function shareToTwitter() {
            const text = encodeURIComponent("I just found the perfect school board for my child using Apt Skola! Find yours here:");
            const url = encodeURIComponent("https://aptskola.com");
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
        }
    </script>
</body>
</html>